<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

  <!-- Bootstrap CSS has to come from a CDN (only way to have the ../fonts assets at glitch) -->
  <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/readable/bootstrap.min.css"
        rel="stylesheet" type="text/css">
  <link rel="stylesheet"
        href="//cdn.rawgit.com/morteza/bootstrap-rtl/v3.3.4/dist/css/bootstrap-rtl.min.css">
  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <link href="/css/lib/ie10-viewport-bug-workaround.css"
        rel="stylesheet" type="text/css">
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  <title>לכו לדוג &mdash; חתולים</title>
  <meta property="og:title" content="לכו לדוג חתולים / Go Fish Cats"/>
  <meta property="og:type" content="game"/>
  <meta property="og:url" content="https://go-fish-cats.glitch.me/"/>
  <meta property="og:image" content="https://cdn.glitch.com/6c90e502-e5c3-4cc0-b081-31c072a60704%2Flogo.png?1494791944591"/>
  <meta property="og:description" content="משחק רביעיות רב משתתפים"/>
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@TheRealDod" />
  <meta name="twitter:title" content="לכו לדוג חתולים / Go Fish Cats" />
  <meta name="twitter:description" content="משחק רביעיות רב משתתפים" />
  <meta name="twitter:image" content="https://cdn.glitch.com/6c90e502-e5c3-4cc0-b081-31c072a60704%2Flogo.png?1494791944591" />
  <meta name="twitter:url" content="https://go-fish-cats.glitch.me/" />
  <link href="https://fonts.googleapis.com/css?family=Alef" rel="stylesheet">
  <link href="/css/style.css" rel="stylesheet" type="text/css">
  <link id="favicon" rel="icon" type="image/png" href=
        "https://cdn.glitch.com/ccb30db3-78cd-46da-af4b-a75cabfc5233%2Fgo-fish-color.png?1493755260516">
</head>
<body class="rtl">
  <nav id="top-bar" class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#top-menu" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">לכו לדוג חתולים</a>
      </div>
      <div id="top-menu" class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><ul class="nav navbar-nav" id="cards-dropdown"></ul></li>
          <li><ul class="nav navbar-nav" id="ranks-dropdown"></ul></li>
        </ul>
        <ul class="nav navbar-nav navbar-left">
          <li>
            <a target="_blank" class="navbar-link"
                 href="https://glitch.com/~go-fish-cats">
              אודות ותודות
            </a>
          </li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </nav>
  <div class="container">
    <div id="chat-page" class="row flex-row flex-grow">
      <div id="chat-area" class="col-xs-12 flex-col flex-grow">
        <div class="row flex-row flex-grow">
          <div id="messages-div" class=
               "col-xs-6 flex-col flex-grow text-info">
            <ul class="messages list-unstyled"></ul>
          </div>
          <div id="game-div" class="col-xs-6 flex-col">
            <h3>
              <span class="label label-default pull-right flip">
                <abbr title="הערימה">
                  <img class="pull-left filp" style="height:1.5em; width: auto" alt="Pile"
                       src="https://cdn.glitch.com/ccb30db3-78cd-46da-af4b-a75cabfc5233%2Fgo-fish-color.png?1493755260516">
                </abbr>
                &nbsp;
                <span id="pile-size">0</span>
              </span>
            </h3>
            <ul id="user-list" class="list-group"></ul>
            <ul id="hand-row" class="list-inline text-center"></ul>
          </div>
        </div>
        <div class="row flex-row">
          <div class="inputMessageDiv col-xs-12 flex-col">
            <input class="form-control inputMessage"
                   placeholder="נא להמתין..." disabled>
          </div>
        </div>
      </div>
    </div><!-- /#chat-page -->
  </div>
  <nav id="bottom-bar" class="navbar navbar-inverse navbar-fixed-bottom">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bottom-menu" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="#" id="username-brand" class="navbar-brand">
         <img alt="loading..."
              src="https://cdn.glitch.com/ccb30db3-78cd-46da-af4b-a75cabfc5233%2Fajax-loader(2).gif?1493922133872">
        </a>
      </div>
      <div id="bottom-menu" class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><p id="game-status" class="navbar-text">מתחבר...</p></li>
        </ul>
        <ul id="play-bar" class="nav navbar-nav navbar-right flip"></ul>
      </div><!--/.nav-collapse -->
    </div>
  </nav>

  <div id="login-modal" class="modal" tabindex="-1" role="dialog"
       data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">שלום לך, דייג/ת חתולים</h4>
        </div>
        <div class="modal-body">
          <div class="jumbotron text-center">
            <div class="page-header">
              <h1>איך לקרוא לך?</h1>
              <input type="text" class="usernameInput"
                     id="username" placeholder="בחר/י שם..."/>
            </div>
          </div>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

  <div id="game-over-modal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title">המשחק נגמר <small>קשה לדוג לבד</small></h4>
        </div>
        <div class="modal-body">
          <div class="page-header text-center">
            <h3>
              <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span>
              זהו, נגמר, והם חיו באושר ועושר.
            </h3>
          </div>
          <div class="well text-center">
            <dl class="dl-horizontal" id="score"></dl>
          </div>
          <p class="lead">
            כדי לשחק שוב, רעננו את הדף.<br>
            <small>
              זה יגרום לכם לעזוב את החדר, לחזור, ולמשוך 4
              קלפים מהערימה.
            </small>
          </p>
          <p>
            תוכלו להישאר כאן ולשוחח גם בלי לרענן את הדף.
          </p>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

  <div id="card-modals"></div>
  <div id="rank-modals"></div>

  <!-- Begin Mustache templates
    Mustache documentation recommends adding templates to
    html gile as scripts:
    https://github.com/janl/mustache.js#include-templates
    The problem with this approach is that syntax-aware editors
    don't highlight, properly indent, etc. the code.
    To overcome this, we use templates as div.mustache elements
    (hidden in CSS).
    The problem with this approach is id collision in case of
    singletons (e.g #items, as opposed to #item-{{ n }}).
    The tweak arround this is to add a dummy var to such an id
    e.g. <div id="{{_}}items" ...>: {{_}} evaluates to the value
    of the uninitialized variable _ (i.e. an empty string).
  -->
  <div id="card-modal-template" class="mustache">
    <div id="{{ hash_id }}-modal" class="modal fade card-modal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title">{{ desc }} <small>{{{ rank_symbol }}} {{ rank }} / {{{ suit_symbol }}} {{ suit }}</small></h4>
          </div>
          <div class="modal-body text-center">
            <a title="{{ desc}}" target="_blank" href="{{ src }}">
              <img class="img-responsive img-center img-thumbnail" src="{{ src }}" alt="{{ desc }}" />
            </a>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
  </div>

  <div id="rank-modal-template" class="mustache">
    <div id="{{ hash_id }}-modal" class="modal fade rank-modal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title">{{{ symbol }}} {{ name }}</h4>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-xs-12">
                <p class="lead rtl">
                  {{{desc}}}
                </p>
                {{#cards}}
                  <div class="col-xs-6 col-md-6 text-center well">
                    <div class="thumbnail">
                      <a target="_blank" href="{{ src }}" title="{{ desc }}">
                        <img class="img-responsive img-center img-thumbnail"
                             src="{{ src }}" alt="{{ desc }}" />
                      </a>
                      <div class="caption">
                        <h5>
                          <small>{{{ suit_symbol }}}{{ suit }}</small><br>
                          {{ desc }}
                        </h5>
                      </div>
                    </div>
                  </div>
                {{/cards}}
              </div>
            </div>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
  </div>

  <div id="card-dropdown-template" class="mustache">
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
         aria-expanded="false">קלפים <span class="caret"></span></a>
      <ul class="dropdown-menu" id="cards-menu">
        {{#cards}}
          <li>
            <button type="button" class="btn btn-default form-control card-menu-item" data-toggle="modal"
                    title="{{ desc }} ({{{ rank_symbol }}} {{ rank }} / {{{ suit_symbol }}} {{ suit }})"
                    data-target="#{{ hash_id }}-modal">
              {{{ rank_symbol }}} {{rank}} / {{{ suit_symbol }}} {{ suit }}
            </button>
          </li>
        {{/cards}}
      </ul>
    </li>
  </div>

  <div id="rank-dropdown-template" class="mustache">
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
         aria-expanded="false">רביעיות <span class="caret"></span></a>
      <ul class="dropdown-menu" id="ranks-menu">
        {{#ranks}}
          <li>
            <button type="button" class="btn btn-default form-control rank-menu-item" data-toggle="modal"
                    title="{{{ symbol }}} {{ name }}"
                    data-target="#{{ hash_id }}-modal">
              {{{ symbol }}} {{name}}
            </button>
          </li>
        {{/ranks}}
      </ul>
    </li>
  </div>

  <div id="user-template" class="mustache">
    <div class="label label-default pull-right flip">
      {{#user.ranks}}
        <abbr title="{{ name }}">{{{ symbol }}}</abbr>
      {{/user.ranks}}
      {{#user.hand_size}}<span>{{.}}</span>{{/user.hand_size}}
      {{^user.hand_size}}&nbsp;{{/user.hand_size}}
    </div>
    {{#me}}
    <abbr title="אני"><span class="glyphicon glyphicon-user" aria-hidden="true"></span></abbr>
    {{/me}}
    {{{ user.name }}}
    {{#playing}}
      <span class="glyphicon glyphicon-hand-right" aria-hidden="true"></span>
    {{/playing}}
    {{#typing}}
      <span class="glyphicon glyphicon-pencil" aria-hidden="true"/>
    {{/typing}}
  </div>

  <div id="hand-row-template" class="mustache">
    {{#cards}}
    <li>
      <button type="button" class="btn btn-default" data-toggle="modal"
              title="{{ desc }} ({{{ rank_symbol }}} {{ rank }} / {{{ suit_symbol }}} {{ suit }})"
              data-target="#{{ hash_id }}-modal">
        <img class="img-responsive thumbnail" src="{{ src }}" alt="{{ desc }}" />
      </button>
    </li>
    {{/cards}}
  </div>

  <div id="play-bar-template" class="mustache">
    <li><p class="navbar-text">בקש/י מ</p></li>
    <li>
      <ul class="nav navbar-nav" id="{{_}}play-with">
        <li class="dropdown active">
          <a id="{{_}}play-with-field" href="#" class="dropdown-toggle" data-toggle="dropdown"
             role="button" aria-haspopup="true" aria-expanded="false">
            <span class="glyphicon glyphicon-list" aria-hidden="true"></span>
          </a>
          <ul class="dropdown-menu" id="{{_}}who-select">
            {{#who}}
            <li>
              <a class="drop-select" href="#" data-value="{{ name }}" data-target="#play-with-field">
                {{ name }}
              </a>
            </li>
            {{/who}}
          </ul>
        </li>
      </ul>
    </li>
    <li><p class="navbar-text">רביעיה</p></li>
    <li>
      <ul class="nav navbar-nav" id="{{_}}play-rank">
        <li class="dropdown active">
          <a id="{{_}}play-rank-field" href="#" class="dropdown-toggle" data-toggle="dropdown"
             role="button" aria-haspopup="true" aria-expanded="false">
            <span class="glyphicon glyphicon-list" aria-hidden="true"></span>
          </a>
          <ul class="dropdown-menu" id="{{_}}rank-select">
            {{#ranks}}
            <li>
              <a class="drop-select" href="#" data-value="{{ name }}" data-target="#play-rank-field">
                {{{ symbol }}} {{ name }}
              </a>
            </li>
            {{/ranks}}
          </ul>
        </li>
      </ul>
    </li>
    <li><p class="navbar-text">קלף</p></li>
    <li>
      <ul class="nav navbar-nav" id="{{_}}play-suit">
        <li class="dropdown active">
          <a id="{{_}}play-suit-field"
            href="#" class="dropdown-toggle" data-toggle="dropdown"
             role="button" aria-haspopup="true" aria-expanded="false">
            <span class="glyphicon glyphicon-list" aria-hidden="true"></span>
          </a>
          <ul class="dropdown-menu" id="{{_}}suit-select">
            {{#suits}}
            <li>
              <a class="drop-select" href="#" data-value="{{ name }}" data-target="#play-suit-field">
                {{{ symbol }}} {{ name }}
              </a>
            </li>
            {{/suits}}
          </ul>
        </li>
      </ul>
    </li>
    <li>
      <button id="{{_}}ask-button" type="button"
              class="btn btn-primary navbar-btn" disabled>בבקשה</button>
    </li>
  </div>

  <div id="score-template" class="mustache">
    {{#scores}}
    <dt>{{ name }}</dt>
    <dd>
      {{#hand_size}}<span class="text-danger">{{.}} קלפים ביד</span>{{/hand_size}}
      <ul class="list-unstyled">
      {{#ranks}}
        <li>{{{ symbol }}} {{ name }}</li>
      {{/ranks}}
      </ul>
    </dd>
    {{/scores}}
  </div>

  <!-- End Mustache templates -->

  <script data-main="/js/main" src="/js/lib/require.js"></script>
</body>
</html>
